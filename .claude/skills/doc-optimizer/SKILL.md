---
name: doc-optimizer
description: Optimize and refactor .md documentation files with strict line limits (CLAUDE.md ≤100, others ≤200), removing low-ROI content and generic knowledge, use when updating docs. (project)
---

# Doc Optimizer

优化、重构 Markdown 文档，严格控制长度和信息密度。

## 何时使用

- 用户要求"优化文档"、"重构文档"、"精简文档"
- 文档超出行数限制需要压缩
- 需要移除通用知识或低价值内容
- 更新现有 .md 文件使其更高效

## 核心约束

**严格遵守**：
1. **只处理 .md 文件**
2. **CLAUDE.md 长度 ≤100 行**
3. **其他 .md 文件长度 ≤200 行**
4. **不添加 Claude 已知的通用知识**（如通用编程概念、语法、常识）
5. **不添加低 ROI 信息**（如过度解释、冗余描述、显而易见的内容）

## 优化原则

### 信息密度优先

**保留**：项目特定规则、非显而易见的技术细节、关键配置参数、代码示例（带行号）、检查清单

**移除**：通用知识、过度解释、重复内容、显而易见的信息、冗长背景

### 压缩技巧

**合并相关内容**：`## 命名规范\n组件使用大驼峰。\n## 文件扩展名\n必须使用 .tsx` → `组件用大驼峰 + .tsx 扩展名`

**列表代替段落**：多个独立陈述用 `-` 列表，不用完整句子

**代码引用**：`项目 ID 在 package.json 的第 2 行` → `[package.json:2](package.json#L2)`

## 优化流程

### 1. 分析文档

检查行数：`wc -l <file>.md`，评估超限、通用知识、低 ROI、冗余内容

### 2. 执行优化

**优先级**：通用知识 > 过度解释 > 冗余描述 > 示例压缩 > 格式优化

**CLAUDE.md**：极致压缩、代码引用、合并配置、移除解释

### 3. 验证

`wc -l <file>.md` 检查行数、通用知识、低 ROI、关键信息完整性、代码引用正确性

## 实战示例

**优化前（120行）**：20行 React 通用介绍 + 30行组件规范详细解释 + 25行 TypeScript 通用知识

**优化后（85行）**：
- 元原则统领 + 紧凑列表
- 代码引用代替详细说明
- 移除 35 行通用知识和显而易见解释

## 注意事项

- 保留关键信息（优化 ≠ 删除）
- 代码引用准确（`#L<number>` 格式）
- 大文档分批优化

## CLAUDE.md 特殊策略

**目标**：≤100 行

**技巧**：元原则顶部（1行多原则） · 代码引用代替解释 · 合并配置项 · 紧凑格式

**示例**：`8行配置说明 → 2行代码引用列表`

## 成功标准

行数达标 · 信息密度高 · 无通用知识 · 关键信息完整 · 代码引用准确
