# Known Bugs

## Bug #1: åµŒå¥—æ™®é€šç®­å¤´å‡½æ•°æ— æ³•è®¿é—® `this`

**çŠ¶æ€**: æœªä¿®å¤ (æ¶æ„é™åˆ¶)

**å½±å“é¢**: ä¸­ç­‰

**ç°è±¡**:
```coffee
class A
  method: (x) ->
    inner = -> return this  # âœ— ç¼–è¯‘å¤±è´¥
    inner()
```

**é”™è¯¯ä¿¡æ¯**:
```
ğŸ“ file.coffee:3
  â†’ 3 |     inner = -> return this
[ç¼–è¯‘åœ¨ Formatter é˜¶æ®µå¤±è´¥]
```

**æ ¹æœ¬åŸå› **:
- åµŒå¥—æ™®é€šç®­å¤´å‡½æ•° `->` ä¸ä¼šæ•è·å¤–å±‚ `this`
- CoffeeScript â†’ AHK è½¬è¯‘æ—¶ï¼ŒåµŒå¥—å‡½æ•°ä¸­çš„è£¸ `this` æ— æ³•ç»‘å®šåˆ°ç±»å®ä¾‹
- åªæœ‰èƒ–ç®­å¤´ `=>` æ‰ä¼šé€šè¿‡ `â„“this` å‚æ•°ä¼ é€’ `this` ç»‘å®š

**å½±å“èŒƒå›´**:
- æ‰€æœ‰åœ¨ç±»æ–¹æ³•çš„åµŒå¥—æ™®é€šç®­å¤´å‡½æ•°ä¸­è®¿é—® `this` çš„åœºæ™¯
- ç°æœ‰æµ‹è¯•å¥—ä»¶ 47 ä¸ªæµ‹è¯•ä¸­æ— ä¸€è¦†ç›–æ­¤åœºæ™¯

**Workaround**:
```coffee
# æ–¹æ¡ˆ 1: ä½¿ç”¨èƒ–ç®­å¤´
class A
  method: (x) ->
    inner = => return this  # âœ“ ä½¿ç”¨ =>
    inner()

# æ–¹æ¡ˆ 2: æ‰‹åŠ¨ä¿å­˜ this
class A
  method: (x) ->
    self = this
    inner = -> return self  # âœ“ è®¿é—® self
    inner()
```

**ä¿®å¤éš¾åº¦**: â­â­â­â­ (é«˜)
- éœ€è¦åœ¨ Formatter/Processor æ£€æµ‹åµŒå¥—å‡½æ•°ä¸­çš„è£¸ `this`
- è‡ªåŠ¨æ’å…¥ `_this = this` èµ‹å€¼
- æ›¿æ¢åµŒå¥—å‡½æ•°ä¸­æ‰€æœ‰ `this` ä¸º `_this`

**ä¼˜å…ˆçº§**: ä½ - å»ºè®®æ–‡æ¡£åŒ–ä¸ºå·²çŸ¥é™åˆ¶

---

## Bug #2: èƒ–ç®­å¤´åµŒå¥—å‡½æ•°ä¸­ `this.property` æ¸²æŸ“é”™è¯¯

**çŠ¶æ€**: ğŸ”§ å¾…ä¿®å¤

**å½±å“é¢**: å°

**ç°è±¡**:
```coffee
class TestClass
  method1: (x) ->
    inner = => return this.method1  # ä½¿ç”¨èƒ–ç®­å¤´
    result = inner()
    return result
```

**ç¼–è¯‘è¾“å‡º**:
```ahk
9bq306dv71o_9(Î») {
  return .method1    ; âœ— this ä¸¢å¤±
}
```

**é¢„æœŸè¾“å‡º**:
```ahk
9bq306dv71o_9(Î») {
  return this.method1
}
```

**æ ¹æœ¬åŸå› **:
- èƒ–ç®­å¤´å‡½æ•°æå–åï¼Œ`this` é€šè¿‡ `this := â„“this` èµ‹å€¼
- ä½†åœ¨ Renderer å¤„ç† `this.property` æ—¶ï¼Œ`this` è¢«é”™è¯¯åæ‰
- è¾“å‡ºå˜æˆ `.property` è€Œé `this.property`

**å½±å“èŒƒå›´**:
- ä»…å½±å“ä½¿ç”¨èƒ–ç®­å¤´ä¸”è®¿é—® `this` å±æ€§/æ–¹æ³•çš„åµŒå¥—å‡½æ•°
- test-edge-cases.coffee method1 å¯å¤ç°

**ä¿®å¤ä½ç½®**: src/renderer/ ä¸­å¤„ç† `.` è¿ç®—ç¬¦æˆ– `this` ç±»å‹çš„é€»è¾‘

**ä¿®å¤éš¾åº¦**: â­â­ (ä¸­ä½)

**ä¼˜å…ˆçº§**: ä¸­ - åº”è¯¥ä¿®å¤ï¼ˆå½±å“æ­£ç¡®æ€§ï¼‰
